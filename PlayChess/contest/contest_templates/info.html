<!-- This template would be used for inheritance across different webpages of the site app! -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Favicons ! -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='Images/favicons/favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='Images/favicons/favicon.ico') }}" type="image/x-icon">
    <!-- Favicons end -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Bootstrap and Jquery -->
    <link rel="stylesheet" href="{{ url_for('static', filename='SRC/CSS/bootstrap.min.css')}}"/>
    <!--Google Fonts-->
    <link rel="stylesheet" href="{{ url_for('static', filename='SRC/CSS/googlefont.css')}}"/>
    <script src="{{ url_for('static', filename='SRC/JS/jquery-3.3.1.min.js')}}"></script>
    <script src="{{ url_for('static', filename='SRC/JS/popper.min.js')}}"></script>
    <script src="{{ url_for('static', filename='SRC/JS/bootstrap.min.js')}}"></script>
    <!-- Web page exclusive imports go in includes -->
    <link rel="stylesheet" href="{{url_for('static', filename='SRC/CSS/fa.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='CSS/contest.css')}}">
    <title>
        {{ title | safe }}
    </title>
</head>
<body>
    <div id="alerts">
        {% if error_code==1 %}
            <div class="alert alert-danger alert-dismissible fade show">
            <button type="button" class="close" data-dismiss="alert">&times;</button>You've submitted your response!</div>
        {% endif %}
    </div>
    <div class="main">
        {{ info | safe }}
    </div>
    <div class="interactive-buttons raised">
        <button id="enter" class="raised btn btn-danger btn-lg btn-block btn-disabled"> ENTER </button>
    </div>
</body>
     <script>
    $("#enter").on('click', function(){
        if (window.location.href.slice(window.location.href.indexOf('contest/')+8) === 'PZZLTR') {
            register();
        } else {
            let contestBegTime = 1609583400000 - 1000;
            let contestEndTime = 1609594200000 + 60*60*1000 + 1000;
            let curr_time = new Date();
            if (curr_time > contestBegTime && curr_time < contestEndTime) {
                console.log("work");
                register();
            } else if (curr_time <= contestBegTime) {
                alert("Contest hasnt started yet");
            } else {
                alert("Contest is already over!");
            }
        }
    });

    function register() {
        let contest_id = window.location.href;
        let base_url = window.location.href;
        base_url = base_url.slice(0, base_url.indexOf('/contest')+8);
        contest_id = contest_id.slice(contest_id.indexOf('contest/')+8);
        window.location.href = `${base_url}/${contest_id}/register`;
    }
    </script>
</html>